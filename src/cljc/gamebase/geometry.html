<html><head>
<script>
function buttonOnClick(id) {
  var e = document.getElementById(id);
  var b = document.getElementById("b"+id);
  console.log(e.style.display);
  if (e.style.display == 'none') {
    e.style.display='block';
    b.textContent = '-';
  } else {
    e.style.display='none';
    b.textContent = '+';
  }
}
</script>
<style>body {
  font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
}

h1.title {

}

h1 {
  border-bottom: solid;
}

span.regular {

}

span.em {
  font-style: italic;
}

span.inline {
  margin: 0;
  padding: 0;
  font-size: 90%;
  vertical-align: 10%;
  font-style: italic;
}

span.code {
  font-family: 'nimbus mono', monospace;
  font-size: 80%;
  white-space: pre;
  padding: 0;
}

span.bcode {
  font-family: 'nimbus mono', monospace;
  font-size: 80%;
  font-weight: bold;
  white-space: pre;
  padding: 0;
}

span.icode {
  font-family: 'nimbus mono', monospace;
  font-size: 80%;
  font-style: italic;
  white-space: pre;
  padding: 0;
}

p.code {
  margin: 0.25em;
}</style></head><body><h1><button id="b1" onclick="buttonOnClick(1)">-</button></h1><h2>Table of Contents</h2><div><p class="code"><span><span class="code">(</span><span class="bcode">ns</span></span><span class="code"> </span><span class="code">g</span><span class="code">a</span><span class="code">m</span><span class="code">e</span><span class="code">b</span><span class="code">a</span><span class="code">s</span><span class="code">e</span><span class="code">.</span><span class="code">g</span><span class="code">e</span><span class="code">o</span><span class="code">m</span><span class="code">e</span><span class="code">t</span><span class="code">r</span><span class="code">y</span><span class="code">)</span></p></div><span></span><div><h1><button id="b2" onclick="buttonOnClick(2)">-</button> Overview</h1><div id="2"><div><p class="code"><span><span class="code">(</span><span class="bcode">do</span></span></p></div><p><span class="regular"> This module defines some cartesian geometry to the extent we think is useful in games.</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">)</span></p></div><span></span></div></div><div><h1><button id="b3" onclick="buttonOnClick(3)">-</button> Utilities</h1><div id="3"><div><p class="code"><span><span class="code">(</span><span class="bcode">do</span></span></p></div><p><span class="regular"> TODO: This should be dispatched between clj and cljs.</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defn</span></span><span class="code"> </span><span class="code">s</span><span class="code">q</span><span class="code">r</span><span class="code">t</span><span class="code"> </span><span class="code">[</span><span class="code">x</span><span class="code">]</span><span class="code"> </span><span class="code">(</span><span class="code">M</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">/</span><span class="code">s</span><span class="code">q</span><span class="code">r</span><span class="code">t</span><span class="code"> </span><span class="code">x</span><span class="code">)</span><span class="code">)</span></p></div><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">def</span></span><span class="code">m</span><span class="code">a</span><span class="code">c</span><span class="code">r</span><span class="code">o</span><span class="code"> </span><span class="code">e</span><span class="code">x</span><span class="code">a</span><span class="code">m</span><span class="code">p</span><span class="code">l</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">[</span><span class="code">&</span><span class="code"> </span><span class="code">b</span><span class="code">o</span><span class="code">d</span><span class="code">y</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">let</span></span><span class="code"> </span><span class="code">[</span><span class="code">t</span><span class="code">r</span><span class="code">i</span><span class="code">p</span><span class="code">l</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">(</span><span class="code">p</span><span class="code">a</span><span class="code">r</span><span class="code">t</span><span class="code">i</span><span class="code">t</span><span class="code">i</span><span class="code">o</span><span class="code">n</span><span class="code"> </span><span class="code">3</span><span class="code"> </span><span class="code">3</span><span class="code"> </span><span class="code">n</span><span class="code">i</span><span class="code">l</span><span class="code"> </span><span class="code">b</span><span class="code">o</span><span class="code">d</span><span class="code">y</span><span class="code">)</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">assert</span></span><span class="code"> </span><span class="code">(</span><span class="code">e</span><span class="code">v</span><span class="code">e</span><span class="code">r</span><span class="code">y</span><span class="code">?</span><span class="code"> </span><span class="code">#</span><span class="code">(</span><span class="code">=</span><span class="code"> </span><span class="code">3</span><span class="code"> </span><span class="code">(</span><span class="code">c</span><span class="code">o</span><span class="code">u</span><span class="code">n</span><span class="code">t</span><span class="code"> </span><span class="code">%</span><span class="code">)</span><span class="code">)</span><span class="code"> </span><span class="code">t</span><span class="code">r</span><span class="code">i</span><span class="code">p</span><span class="code">l</span><span class="code">e</span><span class="code">s</span><span class="code">)</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">assert</span></span><span class="code"> </span><span class="code">(</span><span class="code">e</span><span class="code">v</span><span class="code">e</span><span class="code">r</span><span class="code">y</span><span class="code">?</span><span class="code"> </span><span class="code">#</span><span class="code">(</span><span class="code">=</span><span class="code"> </span><span class="code">'</span><span class="code">=</span><span class="code">></span><span class="code"> </span><span><span class="code">(</span><span class="bcode">second</span></span><span class="code"> </span><span class="code">%</span><span class="code">)</span><span class="code">)</span><span class="code"> </span><span class="code">t</span><span class="code">r</span><span class="code">i</span><span class="code">p</span><span class="code">l</span><span class="code">e</span><span class="code">s</span><span class="code">)</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">let</span></span><span class="code"> </span><span class="code">[</span><span class="code">a</span><span class="code">s</span><span class="code">s</span><span class="code">e</span><span class="code">r</span><span class="code">t</span><span class="code">i</span><span class="code">o</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">(</span><span class="code">-</span><span class="code">></span><span class="code">></span><span class="code"> </span><span class="code">t</span><span class="code">r</span><span class="code">i</span><span class="code">p</span><span class="code">l</span><span class="code">e</span><span class="code">s</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">map</span></span><span class="code"> </span><span><span class="code">(</span><span class="bcode">fn</span></span><span class="code"> </span><span class="code">[</span><span class="code">[</span><span class="code">a</span><span class="code"> </span><span class="code">_</span><span class="code"> </span><span class="code">b</span><span class="code">]</span><span class="code">]</span><span class="code"> </span><span class="code">(</span><span class="code">l</span><span class="code">i</span><span class="code">s</span><span class="code">t</span><span class="code"> </span><span class="code">'</span><span class="code">=</span><span class="code"> </span><span class="code">a</span><span class="code"> </span><span class="code">b</span><span class="code">)</span><span class="code">)</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">map</span></span><span class="code"> </span><span class="code">#</span><span class="code">(</span><span class="code">l</span><span class="code">i</span><span class="code">s</span><span class="code">t</span><span class="code"> </span><span class="code">'</span><span class="code">a</span><span class="code">s</span><span class="code">s</span><span class="code">e</span><span class="code">r</span><span class="code">t</span><span class="code"> </span><span class="code">%</span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">`</span><span><span class="code">(</span><span class="bcode">do</span></span><span class="code"> </span><span class="code">~</span><span class="code">@</span><span class="code">a</span><span class="code">s</span><span class="code">s</span><span class="code">e</span><span class="code">r</span><span class="code">t</span><span class="code">i</span><span class="code">o</span><span class="code">n</span><span class="code">s</span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">)</span></p></div><span></span><div><p class="code"><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code">T</span><span class="code">O</span><span class="code">D</span><span class="code">O</span><span class="code">:</span><span class="code"> </span><span class="code">u</span><span class="code">s</span><span class="code">e</span><span class="code"> </span><span class="code">r</span><span class="code">e</span><span class="code">a</span><span class="code">l</span><span class="code"> </span><span class="code">o</span><span class="code">n</span><span class="code">e</span><span class="code"> </span><span class="code">(</span><span class="code">?</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">def</span></span><span class="code"> </span><span class="code">p</span><span class="code">i</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">1</span><span class="code">5</span><span class="code">9</span><span class="code">2</span><span class="code">6</span><span class="code">)</span></p></div><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">def</span></span><span class="code"> </span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">-</span><span class="code">t</span><span class="code">o</span><span class="code">-</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">-</span><span class="code">c</span><span class="code">o</span><span class="code">e</span><span class="code">f</span><span class="code">f</span><span class="code"> </span><span class="code">(</span><span class="code">/</span><span class="code"> </span><span class="code">p</span><span class="code">i</span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">)</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">def</span></span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">-</span><span class="code">t</span><span class="code">o</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">-</span><span class="code">c</span><span class="code">o</span><span class="code">e</span><span class="code">f</span><span class="code">f</span><span class="code"> </span><span class="code">(</span><span class="code">/</span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code"> </span><span class="code">p</span><span class="code">i</span><span class="code">)</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">)</span></p></div><span></span></div></div><div><h1><button id="b4" onclick="buttonOnClick(4)">-</button> Points</h1><div id="4"><div><p class="code"><span><span class="code">(</span><span class="bcode">do</span></span></p></div><p><span class="regular"> Not to complicate matters, we'll represent points as sequences of x and y, e.g.:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">[</span><span class="code">2</span><span class="code"> </span><span class="code">5</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">'</span><span class="code">(</span><span class="code">2</span><span class="code"> </span><span class="code">5</span><span class="code">)</span></p></div><p><span class="regular"> - both represent a point with x=2 and y=5.</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">)</span></p></div><span></span></div></div><div><h1><button id="b5" onclick="buttonOnClick(5)">-</button> Angles</h1><div id="5"><div><p class="code"><span><span class="code">(</span><span class="bcode">do</span></span></p></div><span></span><p><span class="regular"> We will represent angles in different ways:</span></p><span></span><p><span class="regular"> - analytic (radians):</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">{</span><span class="bcode">:radians</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">}</span></p></div><span></span><p><span class="regular"> - degrees:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">{</span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">3</span><span class="code">0</span><span class="code">}</span></p></div><span></span><p><span class="regular"> - as slope (vector dx dy):</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">{</span><span class="bcode">:slope</span><span class="code"> </span><span class="code">[</span><span class="code">2</span><span class="code"> </span><span class="code">1</span><span class="code">]</span><span class="code">}</span></p></div><span></span><p><span class="regular"> </span><span class="em">Note. We might also want a representation as tangent/cotangent value,</span><span class="regular"> </span><span class="em">but that is not as much useful, because of difficulties in encompassing</span><span class="regular"> </span><span class="em">the whole circle (360 degrees).</span><span class="regular"></span></p><span></span><p><span class="regular"> The slope representation encompasses the whole 360 degrees, as it is understood as a vector. So </span><span class="code">{:slope [1 1]}</span><span class="regular"> means 45 degrees, while </span><span class="code">{:slope [-1 -1]}</span><span class="regular"> represents 225 degrees (45 + 180), or -135 degrees, which is the same. In conversions, we will produce radian or degree values between -180 degrees (inclusive) and 180 degrees (exclusive).</span></p><span></span><p><span class="regular"> In contexts where an angle is expected but a number is given, we will assume that </span><span class="em">the number represents the angle in radians</span><span class="regular">.</span></p><span></span><p><span class="regular"> We will allow more than representation at the same time, e.g.</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">{</span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">4</span><span class="code">5</span><span class="code">,</span><span class="code"> </span><span class="bcode">:slope</span><span class="code"> </span><span class="code">[</span><span class="code">1</span><span class="code"> </span><span class="code">1</span><span class="code">]</span><span class="code">}</span></p></div><p><span class="regular"> In such cases we will assume, </span><span class="em">at the responsibility of the creator</span><span class="regular"> </span><span class="em">of such a value</span><span class="regular">, that all representations describe the same angle (with some approximation allowed of course).</span></p><span></span><h2> Analytic representation (radians)</h2><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">do</span></span></p></div><p><span class="regular"> To create the analytic representation of a given number of radians:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defn</span></span><span class="code"> </span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">[</span><span class="code">n</span><span class="code">u</span><span class="code">m</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">{</span><span class="bcode">:radians</span><span class="code"> </span><span class="code">n</span><span class="code">u</span><span class="code">m</span><span class="code">}</span><span class="code">)</span></p></div><span></span><p><span class="regular"> To convert or augment any angle to the analytic representation:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defn</span></span><span class="code"> </span><span class="code">i</span><span class="code">n</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">[</span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">if</span></span><span class="code"> </span><span class="code">(</span><span class="code">n</span><span class="code">u</span><span class="code">m</span><span class="code">b</span><span class="code">e</span><span class="code">r</span><span class="code">?</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="inline">bare number: convert to representation</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">{</span><span class="bcode">:radians</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">}</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="inline">otherwise: augment the representation with radians</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">let</span></span><span class="code"> </span><span class="code">[</span><span class="code">{</span><span class="bcode">:keys</span><span class="code"> </span><span class="code">[</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">s</span><span class="code">l</span><span class="code">o</span><span class="code">p</span><span class="code">e</span><span class="code">]</span><span class="code">}</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">cond</span></span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code"> </span><span class="inline">(radians already in representation: nothing to do)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span><span class="code">(</span><span class="bcode">assoc</span></span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code"> </span><span class="bcode">:radians</span><span class="code"> </span><span class="code">(</span><span class="code">*</span><span class="code"> </span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">-</span><span class="code">t</span><span class="code">o</span><span class="code">-</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">-</span><span class="code">c</span><span class="code">o</span><span class="code">e</span><span class="code">f</span><span class="code">f</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code">)</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">s</span><span class="code">l</span><span class="code">o</span><span class="code">p</span><span class="code">e</span><span class="code"> </span><span><span class="code">(</span><span class="bcode">let</span></span><span class="code"> </span><span class="code">[</span><span class="code">[</span><span class="code">d</span><span class="code">x</span><span class="code"> </span><span class="code">d</span><span class="code">y</span><span class="code">]</span><span class="code"> </span><span class="code">s</span><span class="code">l</span><span class="code">o</span><span class="code">p</span><span class="code">e</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">n</span><span class="code">i</span><span class="code">l</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">)</span></p></div><span></span><p><span class="regular"> To get the number of radians (which also represents the angle as bare number) from any angle:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defn</span></span><span class="code"> </span><span class="code">g</span><span class="code">e</span><span class="code">t</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">[</span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">if</span></span><span class="code"> </span><span class="code">(</span><span class="code">n</span><span class="code">u</span><span class="code">m</span><span class="code">b</span><span class="code">e</span><span class="code">r</span><span class="code">?</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="inline">bare number: it is the radians value itself</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="inline">otherwise: get or calculate the value from representation</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">let</span></span><span class="code"> </span><span class="code">[</span><span class="code">{</span><span class="bcode">:keys</span><span class="code"> </span><span class="code">[</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">s</span><span class="code">l</span><span class="code">o</span><span class="code">p</span><span class="code">e</span><span class="code">]</span><span class="code">}</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">cond</span></span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="inline">(radians are in representation: just get it)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">(</span><span class="code">*</span><span class="code"> </span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">-</span><span class="code">t</span><span class="code">o</span><span class="code">-</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">-</span><span class="code">c</span><span class="code">o</span><span class="code">e</span><span class="code">f</span><span class="code">f</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">)</span></p></div><span></span><p><span class="regular"> For example,</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">e</span><span class="code">x</span><span class="code">a</span><span class="code">m</span><span class="code">p</span><span class="code">l</span><span class="code">e</span><span class="code">s</span></p></div><p><span class="regular"></span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">{</span><span class="bcode">:radians</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">}</span></p></div><p><span class="regular"></span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">i</span><span class="code">n</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">{</span><span class="bcode">:radians</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">}</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">i</span><span class="code">n</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">{</span><span class="bcode">:radians</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">}</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">{</span><span class="bcode">:radians</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">}</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">i</span><span class="code">n</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">{</span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">9</span><span class="code">0</span><span class="code">}</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">{</span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">9</span><span class="code">0</span><span class="code">,</span><span class="code"> </span><span class="bcode">:radians</span><span class="code"> </span><span class="code">1</span><span class="code">.</span><span class="code">5</span><span class="code">7</span><span class="code">0</span><span class="code">7</span><span class="code">9</span><span class="code">6</span><span class="code">3</span><span class="code">}</span></p></div><p><span class="regular"></span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">g</span><span class="code">e</span><span class="code">t</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">g</span><span class="code">e</span><span class="code">t</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">{</span><span class="bcode">:radians</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">}</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">g</span><span class="code">e</span><span class="code">t</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">{</span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">}</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">1</span><span class="code">5</span><span class="code">9</span><span class="code">2</span><span class="code">6</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">g</span><span class="code">e</span><span class="code">t</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">{</span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">,</span><span class="code"> </span><span class="bcode">:radians</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">6</span><span class="code">}</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">6</span><span class="code">)</span><span class="code">)</span></p></div><span></span><h2> Degrees</h2><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">do</span></span></p></div><span></span><p><span class="regular"> Create:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defn</span></span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">[</span><span class="code">n</span><span class="code">u</span><span class="code">m</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">{</span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">n</span><span class="code">u</span><span class="code">m</span><span class="code">}</span><span class="code">)</span></p></div><span></span><p><span class="regular"> Convert/augment:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defn</span></span><span class="code"> </span><span class="code">i</span><span class="code">n</span><span class="code">-</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">[</span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">if</span></span><span class="code"> </span><span class="code">(</span><span class="code">n</span><span class="code">u</span><span class="code">m</span><span class="code">b</span><span class="code">e</span><span class="code">r</span><span class="code">?</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">{</span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">(</span><span class="code">*</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">-</span><span class="code">t</span><span class="code">o</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">-</span><span class="code">c</span><span class="code">o</span><span class="code">e</span><span class="code">f</span><span class="code">f</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">)</span><span class="code">}</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">let</span></span><span class="code"> </span><span class="code">[</span><span class="code">{</span><span class="bcode">:keys</span><span class="code"> </span><span class="code">[</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">s</span><span class="code">l</span><span class="code">o</span><span class="code">p</span><span class="code">e</span><span class="code">]</span><span class="code">}</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">cond</span></span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span><span class="code">(</span><span class="bcode">assoc</span></span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code"> </span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">(</span><span class="code">*</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">-</span><span class="code">t</span><span class="code">o</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">-</span><span class="code">c</span><span class="code">o</span><span class="code">e</span><span class="code">f</span><span class="code">f</span><span class="code"> </span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">)</span></p></div><span></span><p><span class="regular"> Get numeric value:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defn</span></span><span class="code"> </span><span class="code">g</span><span class="code">e</span><span class="code">t</span><span class="code">-</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">[</span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">if</span></span><span class="code"> </span><span class="code">(</span><span class="code">n</span><span class="code">u</span><span class="code">m</span><span class="code">b</span><span class="code">e</span><span class="code">r</span><span class="code">?</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">*</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">-</span><span class="code">t</span><span class="code">o</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">-</span><span class="code">c</span><span class="code">o</span><span class="code">e</span><span class="code">f</span><span class="code">f</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">let</span></span><span class="code"> </span><span class="code">[</span><span class="code">{</span><span class="bcode">:keys</span><span class="code"> </span><span class="code">[</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">s</span><span class="code">l</span><span class="code">o</span><span class="code">p</span><span class="code">e</span><span class="code">]</span><span class="code">}</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">cond</span></span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code"> </span><span class="code">(</span><span class="code">*</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">-</span><span class="code">t</span><span class="code">o</span><span class="code">-</span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">-</span><span class="code">c</span><span class="code">o</span><span class="code">e</span><span class="code">f</span><span class="code">f</span><span class="code"> </span><span class="code">r</span><span class="code">a</span><span class="code">d</span><span class="code">i</span><span class="code">a</span><span class="code">n</span><span class="code">s</span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">)</span></p></div><span></span><p><span class="regular"> For example,</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">e</span><span class="code">x</span><span class="code">a</span><span class="code">m</span><span class="code">p</span><span class="code">l</span><span class="code">e</span><span class="code">s</span></p></div><p><span class="regular"></span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">i</span><span class="code">n</span><span class="code">-</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">1</span><span class="code">5</span><span class="code">9</span><span class="code">2</span><span class="code">6</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">{</span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">.</span><span class="code">0</span><span class="code">}</span><span class="code"> </span><span class="inline">- bare number is always radians!</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">i</span><span class="code">n</span><span class="code">-</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">{</span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">}</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">{</span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">}</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">i</span><span class="code">n</span><span class="code">-</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">{</span><span class="bcode">:radians</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">1</span><span class="code">5</span><span class="code">9</span><span class="code">2</span><span class="code">6</span><span class="code">}</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">{</span><span class="bcode">:radians</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">1</span><span class="code">5</span><span class="code">9</span><span class="code">2</span><span class="code">6</span><span class="code">,</span><span class="code"> </span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">.</span><span class="code">0</span><span class="code">}</span></p></div><p><span class="regular"></span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">g</span><span class="code">e</span><span class="code">t</span><span class="code">-</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">1</span><span class="code">5</span><span class="code">9</span><span class="code">2</span><span class="code">6</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">.</span><span class="code">0</span><span class="code"> </span><span class="inline">- bare number is always radians!</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">g</span><span class="code">e</span><span class="code">t</span><span class="code">-</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">{</span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">}</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">g</span><span class="code">e</span><span class="code">t</span><span class="code">-</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">{</span><span class="bcode">:radians</span><span class="code"> </span><span class="code">3</span><span class="code">.</span><span class="code">1</span><span class="code">4</span><span class="code">1</span><span class="code">5</span><span class="code">9</span><span class="code">2</span><span class="code">6</span><span class="code">}</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">.</span><span class="code">0</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">g</span><span class="code">e</span><span class="code">t</span><span class="code">-</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code"> </span><span class="code">{</span><span class="bcode">:radians</span><span class="code"> </span><span class="code">3</span><span class="code">,</span><span class="code"> </span><span class="bcode">:degrees</span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">}</span><span class="code">)</span><span class="code"> </span><span class="code">=</span><span class="code">></span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">)</span><span class="code">)</span></p></div><span></span><h2> Slope</h2><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">do</span></span></p></div><span></span><p><span class="regular"> Create:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defn</span></span><span class="code"> </span><span class="code">s</span><span class="code">l</span><span class="code">o</span><span class="code">p</span><span class="code">e</span><span class="code"> </span><span class="code">[</span><span class="code">d</span><span class="code">x</span><span class="code"> </span><span class="code">d</span><span class="code">y</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">{</span><span class="bcode">:slope</span><span class="code"> </span><span class="code">[</span><span class="code">d</span><span class="code">x</span><span class="code"> </span><span class="code">d</span><span class="code">y</span><span class="code">]</span><span class="code">}</span><span class="code">)</span></p></div><span></span><p><span class="regular"> Convert/augment:</span></p><span></span><p><span class="regular"> We'll define inverted tangent (ATAN) for our purposes in the codomain of -45 to 45 degrees (the following is the cartesian geometry plane):</span></p><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">4</span><span class="code">5</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">y</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code"> </span><span class="code">d</span><span class="code">y</span><span class="code">/</span><span class="code">d</span><span class="code">x</span><span class="code">=</span><span class="code">1</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">^</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code">#</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code">#</span><span class="code">#</span><span class="code">#</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code">/</span><span class="code">#</span><span class="code">#</span><span class="code">#</span><span class="code">#</span><span class="code">#</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">X</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">></span><span class="code">x</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code">\</span><span class="code">#</span><span class="code">#</span><span class="code">#</span><span class="code">#</span><span class="code">#</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code">#</span><span class="code">#</span><span class="code">#</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code">#</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code"> </span><span class="code">-</span><span class="code">4</span><span class="code">5</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">d</span><span class="code">y</span><span class="code">/</span><span class="code">d</span><span class="code">x</span><span class="code">=</span><span class="code">-</span><span class="code">1</span></p></div><span></span><p><span class="regular"> and so ATAN goes from -45 degrees for dy/dx=-1, through 0 degrees for dy/dx=0 to 45 degrees for dy/dx=1. So the plot of our ATAN is as follows (only the asterisks are in our domain):</span></p><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code"> </span><span class="code">[</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">^</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">.</span><span class="code">-</span><span class="code">'</span><span class="code">'</span><span class="code">'</span><span class="code">'</span><span class="code"> </span><span class="code">A</span><span class="code">T</span><span class="code">A</span><span class="code">N</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">1</span><span class="code">3</span><span class="code">5</span><span class="code">-</span><span class="code">+</span><span class="code"> </span><span class="code">-</span><span class="code"> </span><span class="code">*</span><span class="code">'</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">-</span><span class="code">1</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code">*</span><span class="code"> </span><span class="code">|</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">+</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">*</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">+</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">></span><span class="code"> </span><span class="code">d</span><span class="code">y</span><span class="code">/</span><span class="code">d</span><span class="code">x</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code">*</span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">1</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">.</span><span class="code">*</span><span class="code"> </span><span class="code">-</span><span class="code"> </span><span class="code">+</span><span class="code">-</span><span class="code">4</span><span class="code">5</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">.</span><span class="code">.</span><span class="code">.</span><span class="code">.</span><span class="code">-</span><span class="code">'</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span></p></div><span></span><p><span class="regular"> Similarly we'll define inverted cotangent (ACOTAN) for our purposes in the codomain of 45 to 135 degrees (the following is the cartesian geometry plane):</span></p><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">1</span><span class="code">3</span><span class="code">5</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">4</span><span class="code">5</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">d</span><span class="code">x</span><span class="code">/</span><span class="code">d</span><span class="code">y</span><span class="code">=</span><span class="code">-</span><span class="code">1</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">d</span><span class="code">x</span><span class="code">/</span><span class="code">d</span><span class="code">y</span><span class="code">=</span><span class="code">1</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">y</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code">#</span><span class="code">#</span><span class="code">#</span><span class="code">#</span><span class="code">#</span><span class="code">^</span><span class="code">#</span><span class="code">#</span><span class="code">#</span><span class="code">#</span><span class="code">#</span><span class="code">/</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code">#</span><span class="code">#</span><span class="code">#</span><span class="code">|</span><span class="code">#</span><span class="code">#</span><span class="code">#</span><span class="code">/</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code">#</span><span class="code">|</span><span class="code">#</span><span class="code">/</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">X</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">></span><span class="code">x</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code">\</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span></p></div><span></span><p><span class="regular"> and so ACOTAN goes from 135 degrees for dx/dy=-1, through 90 degrees for dx/dy=0 to 45 degrees for dx/dy=1. So the plot of our ACOTAN is as follows (only the asterisks are in our domain):</span></p><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">g</span><span class="code">l</span><span class="code">e</span><span class="code"> </span><span class="code">[</span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code">r</span><span class="code">e</span><span class="code">e</span><span class="code">s</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">^</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">A</span><span class="code">C</span><span class="code">O</span><span class="code">T</span><span class="code">A</span><span class="code">N</span><span class="code"> </span><span class="code">'</span><span class="code">'</span><span class="code">'</span><span class="code">'</span><span class="code">-</span><span class="code">.</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">'</span><span class="code">*</span><span class="code"> </span><span class="code">-</span><span class="code"> </span><span class="code">+</span><span class="code">-</span><span class="code">1</span><span class="code">3</span><span class="code">5</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code">*</span><span class="code"> </span><span class="code">|</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">*</span><span class="code">-</span><span class="code">9</span><span class="code">0</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code">*</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code">4</span><span class="code">5</span><span class="code">-</span><span class="code">+</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">*</span><span class="code">.</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code">'</span><span class="code">-</span><span class="code">.</span><span class="code">.</span><span class="code">.</span><span class="code">.</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">+</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">X</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">+</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">></span><span class="code"> </span><span class="code">d</span><span class="code">x</span><span class="code">/</span><span class="code">d</span><span class="code">y</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">-</span><span class="code">1</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">1</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span></p></div><p><span class="regular"></span></p><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code">d</span><span class="code">y</span><span class="code">|</span><span class="code">></span><span class="code">|</span><span class="code">d</span><span class="code">x</span><span class="code">|</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">d</span><span class="code"> </span><span class="code">d</span><span class="code">y</span><span class="code">></span><span class="code">0</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">A</span><span class="code">C</span><span class="code">O</span><span class="code">T</span><span class="code">A</span><span class="code">N</span><span class="code">(</span><span class="code">d</span><span class="code">x</span><span class="code">/</span><span class="code">d</span><span class="code">y</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code">|</span><span class="code">d</span><span class="code">y</span><span class="code">|</span><span class="code"><</span><span class="code">|</span><span class="code">d</span><span class="code">x</span><span class="code">|</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">d</span><span class="code"> </span><span class="code">d</span><span class="code">x</span><span class="code"><</span><span class="code">0</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">^</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code">d</span><span class="code">y</span><span class="code">|</span><span class="code"><</span><span class="code">|</span><span class="code">d</span><span class="code">x</span><span class="code">|</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">d</span><span class="code"> </span><span class="code">d</span><span class="code">x</span><span class="code">></span><span class="code">0</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code">/</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code">A</span><span class="code">T</span><span class="code">A</span><span class="code">N</span><span class="code">(</span><span class="code">d</span><span class="code">y</span><span class="code">/</span><span class="code">d</span><span class="code">x</span><span class="code">)</span><span class="code"> </span><span class="code">+</span><span class="code"> </span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code"> </span><span class="code">d</span><span class="code">e</span><span class="code">g</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">X</span><span class="code">-</span><span class="code">-</span><span class="code">-</span><span class="code">></span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">A</span><span class="code">T</span><span class="code">A</span><span class="code">N</span><span class="code">(</span><span class="code">d</span><span class="code">y</span><span class="code">/</span><span class="code">d</span><span class="code">x</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code">a</span><span class="code">n</span><span class="code">d</span><span class="code"> </span><span class="code">n</span><span class="code">o</span><span class="code">r</span><span class="code">m</span><span class="code">a</span><span class="code">l</span><span class="code">i</span><span class="code">z</span><span class="code">e</span><span class="code"> </span><span class="code">t</span><span class="code">o</span><span class="code"> </span><span class="code">[</span><span class="code">-</span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">,</span><span class="code">1</span><span class="code">8</span><span class="code">0</span><span class="code">)</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code">\</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">|</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">/</span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">\</span></p></div><span></span><p><span class="regular"> Get numeric value:</span></p><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">)</span></p></div><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">)</span></p></div><span></span></div></div><div><h1><button id="b6" onclick="buttonOnClick(6)">-</button> Paths</h1><div id="6"><div><p class="code"><span><span class="code">(</span><span class="bcode">do</span></span></p></div><p><span class="regular"> Paths are lines, curves, segmented lines etc. Their main purpose in gamebase is for game objects to move along them.</span></p><span></span><p><span class="regular"> They'll be maps with the </span><span class="code">::path-type</span><span class="regular"> value, specific for different kinds of paths:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">{</span><span class="code">:</span><span class="bcode">:path-type</span><span class="code"> </span><span class="bcode">:example-type</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">;</span><span class="code">;</span><span class="code"> </span><span class="code">.</span><span class="code">.</span><span class="code">.</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">}</span></p></div><p><span class="regular"></span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">)</span></p></div><span></span></div></div><div><h1><button id="b7" onclick="buttonOnClick(7)">-</button> Operation declarations</h1><div id="7"><div><p class="code"><span><span class="code">(</span><span class="bcode">do</span></span></p></div><span></span><p><span class="regular"> Operations on will be declared as multimethods dispatching on object types.</span></p><span></span><h2> Operations on paths</h2><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">do</span></span></p></div><span></span><h3> Lengths etc.</h3><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">do</span></span></p></div><span></span><p><span class="regular"> We'll want to know the length of a path:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defmulti</span></span><span class="code"> </span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span><span class="code">(</span><span class="bcode">fn</span></span><span class="code"> </span><span class="code">[</span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">]</span><span class="code"> </span><span class="code">(</span><span class="code">:</span><span class="bcode">:path-type</span><span class="code"> </span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">)</span><span class="code">)</span><span class="code">)</span></p></div><span></span><p><span class="regular"> Also, to calculate coordinates of the point at given length from start:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defmulti</span></span><span class="code"> </span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">-</span><span class="code">p</span><span class="code">o</span><span class="code">i</span><span class="code">n</span><span class="code">t</span><span class="code">-</span><span class="code">a</span><span class="code">t</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">fn</span></span><span class="code"> </span><span class="code">[</span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code">]</span><span class="code"> </span><span class="code">(</span><span class="code">:</span><span class="bcode">:path-type</span><span class="code"> </span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">)</span><span class="code">)</span><span class="code">)</span></p></div><span></span><p><span class="regular"> and from end:</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defmulti</span></span><span class="code"> </span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">-</span><span class="code">p</span><span class="code">o</span><span class="code">i</span><span class="code">n</span><span class="code">t</span><span class="code">-</span><span class="code">a</span><span class="code">t</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">fn</span></span><span class="code"> </span><span class="code">[</span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code">]</span><span class="code"> </span><span class="code">(</span><span class="code">:</span><span class="bcode">:path-type</span><span class="code"> </span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">)</span><span class="code">)</span><span class="code">)</span></p></div><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">)</span></p></div><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">)</span></p></div><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">)</span></p></div><span></span></div></div><div><h1><button id="b8" onclick="buttonOnClick(8)">-</button> Line segments</h1><div id="8"><div><p class="code"><span><span class="code">(</span><span class="bcode">do</span></span></p></div><p><span class="regular"> A line segment is a section of a straight line extending from one point to another:</span></p><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defn</span></span><span class="code"> </span><span class="code">m</span><span class="code">k</span><span class="code">-</span><span class="code">l</span><span class="code">i</span><span class="code">n</span><span class="code">e</span><span class="code">-</span><span class="code">s</span><span class="code">e</span><span class="code">g</span><span class="code">m</span><span class="code">e</span><span class="code">n</span><span class="code">t</span><span class="code"> </span><span class="code">[</span><span class="code">p</span><span class="code">1</span><span class="code"> </span><span class="code">p</span><span class="code">2</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">{</span><span class="code">:</span><span class="bcode">:path-type</span><span class="code"> </span><span class="bcode">:line-segment</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="bcode">:p1</span><span class="code"> </span><span class="code">p</span><span class="code">1</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="bcode">:p2</span><span class="code"> </span><span class="code">p</span><span class="code">2</span><span class="code">}</span><span class="code">)</span></p></div><span></span><p><span class="regular"> E.g.</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">assert</span></span><span class="code"> </span><span class="code">(</span><span class="code">=</span><span class="code"> </span><span class="code">(</span><span class="code">m</span><span class="code">k</span><span class="code">-</span><span class="code">l</span><span class="code">i</span><span class="code">n</span><span class="code">e</span><span class="code">-</span><span class="code">s</span><span class="code">e</span><span class="code">g</span><span class="code">m</span><span class="code">e</span><span class="code">n</span><span class="code">t</span><span class="code"> </span><span class="code">[</span><span class="code">2</span><span class="code"> </span><span class="code">3</span><span class="code">]</span><span class="code"> </span><span class="code">[</span><span class="code">4</span><span class="code"> </span><span class="code">-</span><span class="code">1</span><span class="code">]</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">{</span><span class="code">:</span><span class="bcode">:path-type</span><span class="code"> </span><span class="bcode">:line-segment</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="bcode">:p1</span><span class="code"> </span><span class="code">[</span><span class="code">2</span><span class="code"> </span><span class="code">3</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="bcode">:p2</span><span class="code"> </span><span class="code">[</span><span class="code">4</span><span class="code"> </span><span class="code">-</span><span class="code">1</span><span class="code">]</span><span class="code">}</span><span class="code">)</span><span class="code">)</span></p></div><span></span><p><span class="regular"> The length of a line segment:</span></p><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defmethod</span></span><span class="code"> </span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span class="bcode">:line-segment</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">[</span><span class="code">{</span><span class="code">[</span><span class="code">x</span><span class="code">1</span><span class="code"> </span><span class="code">y</span><span class="code">1</span><span class="code">]</span><span class="code"> </span><span class="bcode">:p1</span><span class="code">,</span><span class="code"> </span><span class="code">[</span><span class="code">x</span><span class="code">2</span><span class="code"> </span><span class="code">y</span><span class="code">2</span><span class="code">]</span><span class="code"> </span><span class="bcode">:p2</span><span class="code">}</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">let</span></span><span class="code"> </span><span class="code">[</span><span class="code">d</span><span class="code">x</span><span class="code"> </span><span class="code">(</span><span class="code">-</span><span class="code"> </span><span class="code">x</span><span class="code">2</span><span class="code"> </span><span class="code">x</span><span class="code">1</span><span class="code">)</span><span class="code">,</span><span class="code"> </span><span class="code">d</span><span class="code">y</span><span class="code"> </span><span class="code">(</span><span class="code">-</span><span class="code"> </span><span class="code">y</span><span class="code">2</span><span class="code"> </span><span class="code">y</span><span class="code">1</span><span class="code">)</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">s</span><span class="code">q</span><span class="code">r</span><span class="code">t</span><span class="code"> </span><span class="code">(</span><span class="code">+</span><span class="code"> </span><span class="code">(</span><span class="code">*</span><span class="code"> </span><span class="code">d</span><span class="code">x</span><span class="code"> </span><span class="code">d</span><span class="code">x</span><span class="code">)</span><span class="code"> </span><span class="code">(</span><span class="code">*</span><span class="code"> </span><span class="code">d</span><span class="code">y</span><span class="code"> </span><span class="code">d</span><span class="code">y</span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">)</span><span class="code">)</span></p></div><span></span><p><span class="regular"> E.g.</span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">assert</span></span><span class="code"> </span><span class="code">(</span><span class="code">=</span><span class="code"> </span><span class="code">(</span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span class="code">(</span><span class="code">m</span><span class="code">k</span><span class="code">-</span><span class="code">l</span><span class="code">i</span><span class="code">n</span><span class="code">e</span><span class="code">-</span><span class="code">s</span><span class="code">e</span><span class="code">g</span><span class="code">m</span><span class="code">e</span><span class="code">n</span><span class="code">t</span><span class="code"> </span><span class="code">[</span><span class="code">0</span><span class="code"> </span><span class="code">0</span><span class="code">]</span><span class="code"> </span><span class="code">[</span><span class="code">3</span><span class="code"> </span><span class="code">4</span><span class="code">]</span><span class="code">)</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">5</span><span class="code">.</span><span class="code">0</span><span class="code">)</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">assert</span></span><span class="code"> </span><span class="code">(</span><span class="code">=</span><span class="code"> </span><span class="code">(</span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span class="code">(</span><span class="code">m</span><span class="code">k</span><span class="code">-</span><span class="code">l</span><span class="code">i</span><span class="code">n</span><span class="code">e</span><span class="code">-</span><span class="code">s</span><span class="code">e</span><span class="code">g</span><span class="code">m</span><span class="code">e</span><span class="code">n</span><span class="code">t</span><span class="code"> </span><span class="code">[</span><span class="code">-</span><span class="code">2</span><span class="code"> </span><span class="code">5</span><span class="code">]</span><span class="code"> </span><span class="code">[</span><span class="code">1</span><span class="code"> </span><span class="code">9</span><span class="code">]</span><span class="code">)</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">5</span><span class="code">.</span><span class="code">0</span><span class="code">)</span><span class="code">)</span></p></div><span></span><p><span class="regular"> At length:</span></p><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">defmethod</span></span><span class="code"> </span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">-</span><span class="code">p</span><span class="code">o</span><span class="code">i</span><span class="code">n</span><span class="code">t</span><span class="code">-</span><span class="code">a</span><span class="code">t</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span class="bcode">:line-segment</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">[</span><span class="code">{</span><span class="code">[</span><span class="code">x</span><span class="code">1</span><span class="code"> </span><span class="code">y</span><span class="code">1</span><span class="code">]</span><span class="code"> </span><span class="bcode">:p1</span><span class="code">,</span><span class="code"> </span><span class="code">[</span><span class="code">x</span><span class="code">2</span><span class="code"> </span><span class="code">y</span><span class="code">2</span><span class="code">]</span><span class="code"> </span><span class="bcode">:p2</span><span class="code"> </span><span class="bcode">:as</span><span class="code"> </span><span class="code">s</span><span class="code">e</span><span class="code">g</span><span class="code">m</span><span class="code">e</span><span class="code">n</span><span class="code">t</span><span class="code">}</span><span class="code">,</span><span class="code"> </span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">let</span></span><span class="code"> </span><span class="code">[</span><span class="code">d</span><span class="code">x</span><span class="code"> </span><span class="code">(</span><span class="code">-</span><span class="code"> </span><span class="code">x</span><span class="code">2</span><span class="code"> </span><span class="code">x</span><span class="code">1</span><span class="code">)</span><span class="code">,</span><span class="code"> </span><span class="code">d</span><span class="code">y</span><span class="code"> </span><span class="code">(</span><span class="code">-</span><span class="code"> </span><span class="code">y</span><span class="code">2</span><span class="code"> </span><span class="code">y</span><span class="code">1</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">f</span><span class="code">u</span><span class="code">l</span><span class="code">l</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span class="code">(</span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span class="code">s</span><span class="code">e</span><span class="code">g</span><span class="code">m</span><span class="code">e</span><span class="code">n</span><span class="code">t</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">x</span><span class="code">-</span><span class="code">f</span><span class="code">a</span><span class="code">c</span><span class="code">t</span><span class="code">o</span><span class="code">r</span><span class="code"> </span><span class="code">(</span><span class="code">/</span><span class="code"> </span><span class="code">d</span><span class="code">x</span><span class="code"> </span><span class="code">f</span><span class="code">u</span><span class="code">l</span><span class="code">l</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">y</span><span class="code">-</span><span class="code">f</span><span class="code">a</span><span class="code">c</span><span class="code">t</span><span class="code">o</span><span class="code">r</span><span class="code"> </span><span class="code">(</span><span class="code">/</span><span class="code"> </span><span class="code">d</span><span class="code">y</span><span class="code"> </span><span class="code">f</span><span class="code">u</span><span class="code">l</span><span class="code">l</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code">)</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">[</span><span class="code">(</span><span class="code">+</span><span class="code"> </span><span class="code">x</span><span class="code">1</span><span class="code"> </span><span class="code">(</span><span class="code">*</span><span class="code"> </span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span class="code">x</span><span class="code">-</span><span class="code">f</span><span class="code">a</span><span class="code">c</span><span class="code">t</span><span class="code">o</span><span class="code">r</span><span class="code">)</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">+</span><span class="code"> </span><span class="code">y</span><span class="code">1</span><span class="code"> </span><span class="code">(</span><span class="code">*</span><span class="code"> </span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span class="code">y</span><span class="code">-</span><span class="code">f</span><span class="code">a</span><span class="code">c</span><span class="code">t</span><span class="code">o</span><span class="code">r</span><span class="code">)</span><span class="code">)</span><span class="code">]</span><span class="code">)</span><span class="code">)</span></p></div><span></span><p><span class="regular"> E.g.:</span></p><span></span><div><p class="code"><span class="code"> </span><span class="code"> </span><span><span class="code">(</span><span class="bcode">assert</span></span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">=</span><span class="code"> </span><span><span class="code">(</span><span class="bcode">let</span></span><span class="code"> </span><span class="code">[</span><span class="code">m</span><span class="code">y</span><span class="code">-</span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span class="code">(</span><span class="code">m</span><span class="code">k</span><span class="code">-</span><span class="code">l</span><span class="code">i</span><span class="code">n</span><span class="code">e</span><span class="code">-</span><span class="code">s</span><span class="code">e</span><span class="code">g</span><span class="code">m</span><span class="code">e</span><span class="code">n</span><span class="code">t</span><span class="code"> </span><span class="code">[</span><span class="code">-</span><span class="code">2</span><span class="code"> </span><span class="code">5</span><span class="code">]</span><span class="code"> </span><span class="code">[</span><span class="code">1</span><span class="code"> </span><span class="code">9</span><span class="code">]</span><span class="code">)</span><span class="code">]</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">-</span><span class="code">p</span><span class="code">o</span><span class="code">i</span><span class="code">n</span><span class="code">t</span><span class="code">-</span><span class="code">a</span><span class="code">t</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">m</span><span class="code">y</span><span class="code">-</span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">(</span><span class="code">/</span><span class="code"> </span><span class="code">(</span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">-</span><span class="code">l</span><span class="code">e</span><span class="code">n</span><span class="code">g</span><span class="code">t</span><span class="code">h</span><span class="code"> </span><span class="code">m</span><span class="code">y</span><span class="code">-</span><span class="code">p</span><span class="code">a</span><span class="code">t</span><span class="code">h</span><span class="code">)</span><span class="code"> </span><span class="code">2</span><span class="code">)</span><span class="code">)</span><span class="code">)</span></p><p class="code"><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code"> </span><span class="code">[</span><span class="code">-</span><span class="code">0</span><span class="code">.</span><span class="code">5</span><span class="code"> </span><span class="code">7</span><span class="code">.</span><span class="code">0</span><span class="code">]</span><span class="code">)</span><span class="code">)</span></p></div><span></span><p><span class="regular"> </span><span class="em">NOTE</span><span class="regular"></span></p><span></span><p><span class="regular"> Nie sprawdzamy, czy nie wyjechalismy poza segment. Zrobic z tego jakas polityke? Ze np. jesli malo wyjechalismy, to powinnismy tez malo wyjechac na wyniku. - to bedzie bezpieczenstwo na rozne bledy zaokraglen.</span></p><span></span><p><span class="regular"> TODO</span></p><span></span><p><span class="regular"> Drogie rzeczy robic pre-computed! Czyli juz przy mk-line-segment wpisywac do mapki: - length - x-factor - y-factor</span></p><span></span><p><span class="regular"> moze jakos opcjonalnie</span></p><span></span><p><span class="regular"> Mozna potem bedzie robic taka sztuczke:</span></p><span></span><p><span class="regular"> 1. krzywe torow zdefiniowac raz, zero-based</span></p><span></span><p><span class="regular"> 2. a potem w kazdym realnym kafelku, czy moze w trakcie gry w lokomotywie, mozna miec krzywa "nested"</span></p><p><pre>  {::path-type :translated</pre><pre>   :path (tutaj "nested" krzywa)</pre><pre>   :dx</pre><pre>   :dy</pre></p><p><span class="regular"></span></p><div><p class="code"><span class="code"> </span><span class="code"> </span><span class="code">)</span></p></div></div></div></body></html>